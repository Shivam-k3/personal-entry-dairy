<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Daily Journal - Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            background: linear-gradient(135deg, #f9d423 0%, #ff4e50 100%), url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1500&q=80') no-repeat center center fixed;
            background-size: cover;
            min-height: 100vh;
        }
        .bg-glass {
            background: rgba(255,255,255,0.85);
            backdrop-filter: blur(6px);
        }
        .mood-btn {
            transition: transform 0.1s, box-shadow 0.1s;
        }
        .mood-btn:active {
            transform: scale(1.15);
            box-shadow: 0 2px 8px #f9d42344;
        }
        .vibrant-happy { background: linear-gradient(135deg, #f9d423 0%, #ff4e50 100%); color: #fff; }
        .vibrant-smile { background: linear-gradient(135deg, #43cea2 0%, #185a9d 100%); color: #fff; }
        .vibrant-neutral { background: linear-gradient(135deg, #f7971e 0%, #ffd200 100%); color: #fff; }
        .vibrant-sad { background: linear-gradient(135deg, #43cea2 0%, #185a9d 100%); color: #fff; }
        .vibrant-angry { background: linear-gradient(135deg, #ff512f 0%, #dd2476 100%); color: #fff; }
        .vibrant-card { box-shadow: 0 4px 24px 0 #ff4e5044, 0 1.5px 6px 0 #f9d42333; }
        .vibrant-header { color: #ff4e50; text-shadow: 0 2px 8px #f9d42344; }
        .vibrant-btn { background: linear-gradient(90deg, #ff4e50 0%, #f9d423 100%); color: #fff; border: none; }
        .vibrant-btn:hover { background: linear-gradient(90deg, #f9d423 0%, #ff4e50 100%); }
    </style>
</head>
<body class="min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold vibrant-header mb-2">📖 Personal Daily Journal</h1>
            <p class="text-lg text-gray-700 font-semibold">Track your mood and reflect on your day with positivity!</p>
            <div class="mt-4 p-3 bg-yellow-100 rounded-lg">
                <p class="text-sm text-yellow-800">🎯 <strong>Demo Mode:</strong> This is a static demonstration. All data is stored locally in your browser.</p>
            </div>
        </div>

        <!-- Demo Login Section -->
        <div id="demoSection" class="max-w-md mx-auto mt-8 bg-glass rounded-2xl vibrant-card shadow-lg p-8 mb-8">
            <h2 class="text-2xl font-bold text-center mb-4">🚀 Demo Login</h2>
            <p class="text-center text-gray-600 mb-6">Click the button below to start the demo</p>
            <button id="startDemoBtn" class="w-full vibrant-btn py-3 px-4 rounded-md hover:scale-105 transition duration-200 font-medium">
                🎬 Start Demo
            </button>
        </div>

        <!-- Main App Content -->
        <div id="journalApp" class="hidden">
            <div class="flex justify-end items-center mb-4">
                <span class="mr-4 text-gray-700 font-semibold">👤 Demo User</span>
                <button id="logoutBtn" class="bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700">Logout</button>
            </div>
            
            <!-- Main Content -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Left Column - Entry Form -->
                <div class="bg-glass rounded-2xl vibrant-card shadow-lg p-6">
                    <h2 class="text-2xl font-semibold text-gray-800 mb-4">✍️ New Entry</h2>
                    <!-- Mood Picker -->
                    <div id="moodPicker" class="flex justify-between items-center mb-4">
                        <button type="button" class="mood-btn text-3xl vibrant-happy" data-mood="happy" title="Happy">😄</button>
                        <button type="button" class="mood-btn text-3xl vibrant-smile" data-mood="smile" title="Smile">😊</button>
                        <button type="button" class="mood-btn text-3xl vibrant-neutral" data-mood="neutral" title="Neutral">😐</button>
                        <button type="button" class="mood-btn text-3xl vibrant-sad" data-mood="sad" title="Sad">😢</button>
                        <button type="button" class="mood-btn text-3xl vibrant-angry" data-mood="angry" title="Angry">😡</button>
                    </div>
                    <div class="mb-4">
                        <label for="journalEntry" class="block text-sm font-medium text-gray-700 mb-2">
                            How was your day?
                        </label>
                        <textarea 
                            id="journalEntry" 
                            rows="6" 
                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent resize-none"
                            placeholder="Write about your day, feelings, thoughts, or anything on your mind..."
                        ></textarea>
                    </div>
                    <button 
                        id="submitBtn" 
                        class="w-full vibrant-btn py-3 px-4 rounded-md hover:scale-105 transition duration-200 font-medium"
                    >
                        📝 Add Entry
                    </button>
                    <div id="loading" class="hidden mt-4 text-center">
                        <div class="inline-flex items-center text-yellow-600">
                            <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-yellow-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                            Analyzing your entry...
                        </div>
                    </div>
                    <!-- Recent Entry Display -->
                    <div id="recentEntry" class="hidden mt-6 p-4 bg-yellow-50 rounded-lg">
                        <h3 class="font-semibold text-gray-800 mb-2">📊 Analysis</h3>
                        <div id="entryAnalysis"></div>
                    </div>
                </div>
                <!-- Right Column - Entries List -->
                <div class="bg-glass rounded-2xl vibrant-card shadow-lg p-6">
                    <h2 class="text-2xl font-semibold text-gray-800 mb-4">📚 Recent Entries</h2>
                    <!-- Mood Card Grid -->
                    <div id="entriesList" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
                        <div class="text-center text-gray-500 py-8 col-span-full">
                            <div class="text-4xl mb-2">📝</div>
                            <p>No entries yet. Write your first journal entry!</p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Mood Chart -->
            <div class="mt-8 bg-glass rounded-2xl vibrant-card shadow-lg p-6">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4">📈 Mood Trend</h2>
                <div class="h-64">
                    <canvas id="moodChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let entries = JSON.parse(localStorage.getItem('journalEntries') || '[]');
        let chart = null;
        let selectedMood = 'happy';

        // Mood picker logic
        const moodEmoji = {
            happy: '😄',
            smile: '😊',
            neutral: '😐',
            sad: '😢',
            angry: '😡',
            Positive: '😄',
            Negative: '😢',
            Neutral: '😐',
            Crisis: '😡',
        };
        const moodColors = {
            happy: 'bg-yellow-100',
            smile: 'bg-green-100',
            neutral: 'bg-gray-100',
            sad: 'bg-blue-100',
            angry: 'bg-red-100',
            Positive: 'bg-yellow-100',
            Negative: 'bg-blue-100',
            Neutral: 'bg-gray-100',
            Crisis: 'bg-red-200',
        };

        // DOM elements
        const demoSection = document.getElementById('demoSection');
        const journalApp = document.getElementById('journalApp');
        const startDemoBtn = document.getElementById('startDemoBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const journalEntry = document.getElementById('journalEntry');
        const submitBtn = document.getElementById('submitBtn');
        const loading = document.getElementById('loading');
        const recentEntry = document.getElementById('recentEntry');
        const entryAnalysis = document.getElementById('entryAnalysis');
        const entriesList = document.getElementById('entriesList');
        const moodChart = document.getElementById('moodChart');

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            // Mood picker event
            document.querySelectorAll('.mood-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    selectedMood = this.getAttribute('data-mood');
                    document.querySelectorAll('.mood-btn').forEach(b => b.classList.remove('ring-4', 'ring-blue-400'));
                    this.classList.add('ring-4', 'ring-blue-400');
                });
            });
            // Set default mood highlight
            document.querySelector('.mood-btn[data-mood="happy"]').classList.add('ring-4', 'ring-blue-400');
        });

        function setupEventListeners() {
            startDemoBtn.addEventListener('click', startDemo);
            logoutBtn.addEventListener('click', logout);
            submitBtn.addEventListener('click', addEntry);
            journalEntry.addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.key === 'Enter') {
                    addEntry();
                }
            });
        }

        function startDemo() {
            demoSection.classList.add('hidden');
            journalApp.classList.remove('hidden');
            displayEntries();
            if (entries.length > 0) {
                drawChart(entries);
            }
        }

        function logout() {
            demoSection.classList.remove('hidden');
            journalApp.classList.add('hidden');
        }

        function analyzeSentiment(text) {
            // Simple sentiment analysis based on keywords
            const positiveWords = ['happy', 'good', 'great', 'excellent', 'wonderful', 'amazing', 'love', 'enjoy', 'fun', 'excited'];
            const negativeWords = ['sad', 'bad', 'terrible', 'awful', 'hate', 'angry', 'upset', 'disappointed', 'worried', 'anxious'];
            
            const words = text.toLowerCase().split(/\s+/);
            let positiveCount = 0;
            let negativeCount = 0;
            
            words.forEach(word => {
                if (positiveWords.includes(word)) positiveCount++;
                if (negativeWords.includes(word)) negativeCount++;
            });
            
            if (positiveCount > negativeCount) return 'Positive';
            if (negativeCount > positiveCount) return 'Negative';
            return 'Neutral';
        }

        function getSuggestion(mood) {
            const suggestions = {
                'Positive': "Great to see you're feeling positive! Keep up the good energy and maybe try something new today.",
                'Negative': "It's okay to have difficult days. Consider talking to a friend, going for a walk, or doing something you enjoy.",
                'Neutral': "A neutral day can be a good time for reflection. Maybe try a new hobby or activity to add some excitement."
            };
            return suggestions[mood] || "Take care of yourself today.";
        }

        function addEntry() {
            const entry = journalEntry.value.trim();
            if (!entry) {
                alert('Please write something in your journal entry!');
                return;
            }

            // Show loading
            submitBtn.disabled = true;
            loading.classList.remove('hidden');
            recentEntry.classList.add('hidden');

            // Simulate processing
            setTimeout(() => {
                const sentiment = analyzeSentiment(entry);
                const suggestion = getSuggestion(sentiment);
                
                const newEntry = {
                    id: entries.length + 1,
                    entry: entry,
                    mood: sentiment,
                    date: new Date().toLocaleDateString(),
                    time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}),
                    suggestion: suggestion
                };
                
                entries.push(newEntry);
                localStorage.setItem('journalEntries', JSON.stringify(entries));
                
                displayEntries();
                showRecentEntry(newEntry);
                drawChart(entries);
                journalEntry.value = '';
                
                submitBtn.disabled = false;
                loading.classList.add('hidden');
            }, 1500);
        }

        function showRecentEntry(entry) {
            const moodColors = {
                'Positive': 'text-green-600',
                'Negative': 'text-red-600',
                'Neutral': 'text-gray-600'
            };

            entryAnalysis.innerHTML = `
                <div class="space-y-3">
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-gray-600">Date:</span>
                        <span class="font-medium">${entry.date} at ${entry.time}</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-gray-600">Mood:</span>
                        <span class="font-medium ${moodColors[entry.mood]}">${entry.mood}</span>
                    </div>
                    <div class="mt-4 p-3 bg-blue-50 rounded-lg">
                        <span class="text-sm font-medium text-blue-800">💡 Suggestion:</span>
                        <p class="text-sm text-blue-700 mt-1">${entry.suggestion}</p>
                    </div>
                </div>
            `;
            recentEntry.classList.remove('hidden');
        }

        function displayEntries() {
            if (entries.length === 0) {
                entriesList.innerHTML = `
                    <div class="text-center text-gray-500 py-8 col-span-full">
                        <div class="text-4xl mb-2">📝</div>
                        <p>No entries yet. Write your first journal entry!</p>
                    </div>
                `;
                return;
            }

            entriesList.innerHTML = entries.map(entry => {
                const mood = entry.mood || 'neutral';
                const emoji = moodEmoji[mood] || '😐';
                const color = moodColors[mood] || 'bg-gray-100';
                return `
                    <div class="${color} rounded-2xl shadow-md p-6 flex flex-col items-center justify-between min-h-[180px]">
                        <div class="text-5xl mb-2">${emoji}</div>
                        <div class="text-xs text-gray-500 mb-1">${entry.date}</div>
                        <div class="font-semibold text-gray-800 text-center mb-2 line-clamp-3">${entry.entry.length > 60 ? entry.entry.slice(0, 60) + '…' : entry.entry}</div>
                        <div class="text-xs text-blue-600 mt-auto">${entry.suggestion ? '💡 ' + entry.suggestion : ''}</div>
                    </div>
                `;
            }).join('');
        }

        function moodToNum(m) {
            if (m === "Positive") return 1;
            if (m === "Negative") return -1;
            return 0;
        }

        function drawChart(data) {
            if (!window.Chart) return;
            
            const labels = data.map(e => e.date);
            const values = data.map(e => moodToNum(e.mood));
            
            if (chart) chart.destroy();
            
            chart = new Chart(moodChart, {
                type: 'line',
                data: {
                    labels,
                    datasets: [{
                        label: 'Mood',
                        data: values,
                        borderColor: '#2563eb',
                        backgroundColor: '#93c5fd',
                        tension: 0.2,
                        fill: false,
                        pointBackgroundColor: function(context) {
                            const value = context.parsed.y;
                            if (value === 1) return '#059669'; // Green for positive
                            if (value === -1) return '#dc2626'; // Red for negative
                            return '#6b7280'; // Gray for neutral
                        },
                        pointBorderColor: function(context) {
                            const value = context.parsed.y;
                            if (value === 1) return '#059669'; // Green for positive
                            if (value === -1) return '#dc2626'; // Red for negative
                            return '#6b7280'; // Gray for neutral
                        }
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            min: -1,
                            max: 1,
                            ticks: {
                                stepSize: 1,
                                callback: v => {
                                    if (v === 1) return "Positive";
                                    if (v === 0) return "Neutral";
                                    if (v === -1) return "Negative";
                                    return "";
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }
    </script>
</body>
</html> 